<!-- template.html -->
<html>
  <head>
    <title>Clatch</title>
    <script src="lib/react-0.10.0.js"></script>
    <script src="lib/JSXTransformer-0.10.0.js"></script>
    <script src="lib/jquery-2.1.0.js"></script>
    <script src="lib/director.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <div id="content"></div>
    <script type="text/jsx" src="logdisplay.jsx"></script>
    <script type="text/jsx" src="logentryform.jsx"></script>
    <script type="text/jsx">
      /**
       * @jsx React.DOM
       */
      
      (function() {
          var clatch = {};
          clatch.loglist = 'loglist';
          clatch.newlog = 'newlog';
          clatch.editlog = 'editlog';

          var Clatch = React.createClass({
            getInitialState: function() {
                return {nowShowing: 'loglist'};
            },

            componentDidMount: function () {
                var setState = this.setState;
                var router = Router({
                '/': setState.bind(this, {nowShowing: clatch.loglist}),
                '/log/new': setState.bind(this, {nowShowing: clatch.newlog}),
                '/log/edit': setState.bind(this, {nowShowing: clatch.editlog})
                });
                router.init('/');
            },

            render: function() {
                console.log(this.state.nowShowing);
                if (this.state.nowShowing === clatch.loglist) {
                    return <LogDisplay entries={this.props.data}/>;
                } else if (this.state.nowShowing === clatch.newlog) {
                    return <LogForm />;
                } else if (this.state.nowShowing === clatch.newlog) {
                    return <LogForm entry={this.props.data} />;
                }
            }
          });


          var entries = [
            {body: 'rock your body', 
             tags: ['butt', 'IsItWorthItLetMeWorkIt'], 
             pages: ['Silk', 'Dragons'], 
             datetime: "07 Apr 2014 08:45"},

            {body: 'dis be body 2', 
             tags: ['peace', 'JustDoIt', 'butt'], 
             pages: ['Rainbows'], datetime: "20 Apr 2014 07:06"}
          ];

          React.renderComponent(
            <Clatch data={entries}/>,
            document.getElementById('content')
          );

    })();
    </script>
  </body>
</html>
